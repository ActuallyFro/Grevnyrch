<!-- Webpage to help create a random encounter -->
<!DOCTYPE html>

<!-- DEV Notes: 
  https://www.w3schools.com/bootstrap/bootstrap_filters.asp
  https://en.wikipedia.org/wiki/Bounty_hunter
-->

 <html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bounty Generator</title>

    <link href="bootstrap.min.5.2.0.css" rel="stylesheet">
    <script src="bootstrap.bundle.min.5.2.0.js"></script>

    <!-- <script src="GLSL.js"></script>
    <link href="GLSL.css" rel="stylesheet"> -->
    <script>
      // <!-- Rac's -- Source of information included -->
      var Racs = [
        ["Dwarf","Player's Hand Book"],
        ["Elf","Player's Hand Book"],
        ["Halfling","Player's Hand Book"],
        ["Human","Player's Hand Book"],
        ["Dragonborn","Player's Hand Book"],
        ["Gnome","Player's Hand Book"],
        ["Half-Elf","Player's Hand Book"],
        ["Half-Orc","Player's Hand Book"],
        ["Tiefling","Player's Hand Book"],
        ["Aarakocra","Monsters of the Multiverse"],
        ["Aasimar","Monsters of the Multiverse"],
        ["Bugbear","Monsters of the Multiverse"],
        ["Centaur","Monsters of the Multiverse"],
        ["Changeling","Monsters of the Multiverse"],
        ["Deep Gnome","Monsters of the Multiverse"],
        ["Duergar","Monsters of the Multiverse"],
        ["Eladrin","Monsters of the Multiverse"],
        ["Fairy","Monsters of the Multiverse"],
        ["Firbolg","Monsters of the Multiverse"],
        ["Genasi, Air ","Monsters of the Multiverse"],
        ["Genasi, Earth","Monsters of the Multiverse"],
        ["Genasi, Fire","Monsters of the Multiverse"],
        ["Genasi, Water","Monsters of the Multiverse"],
        ["Githyanki","Monsters of the Multiverse"],
        ["Githzerai","Monsters of the Multiverse"],
        ["Goblin","Monsters of the Multiverse"],
        ["Goliath","Monsters of the Multiverse"],
        ["Harengon","Monsters of the Multiverse"],
        ["Hobgoblin","Monsters of the Multiverse"],
        ["Kenku","Monsters of the Multiverse"],
        ["Kobold","Monsters of the Multiverse"],
        ["Lizardfolk","Monsters of the Multiverse"],
        ["Minotaur","Monsters of the Multiverse"],
        ["Orc","Monsters of the Multiverse"],
        ["Satyr","Monsters of the Multiverse"],
        ["Sea Elf","Monsters of the Multiverse"],
        ["Shadar-kai","Monsters of the Multiverse"],
        ["Shifter","Monsters of the Multiverse"],
        ["Tabaxi","Monsters of the Multiverse"],
        ["Tortle","Monsters of the Multiverse"],
        ["Triton","Monsters of the Multiverse"],
        ["Yuan-ti","Monsters of the Multiverse"]
      ];

      // <!-- Classes: Source of information included -->
      classes=[
        ["Barbarian","Player's Hand Book"],
        ["Bard","Player's Hand Book"],
        ["Cleric","Player's Hand Book"],
        ["Druid","Player's Hand Book"],
        ["Fighter","Player's Hand Book"],
        ["Monk","Player's Hand Book"],
        ["Paladin","Player's Hand Book"],
        ["Ranger","Player's Hand Book"],
        ["Rogue","Player's Hand Book"],
        ["Sorcerer","Player's Hand Book"],
        ["Warlock","Player's Hand Book"],
        ["Wizard","Player's Hand Book"],
        ["Artificer","Tasha's Cauldron of Everything"]
      ];

      backgrounds=[
        ["Acolyte","Player's Hand Book"],
        ["Charlatan","Player's Hand Book"],
        ["Criminal","Player's Hand Book"],
        ["Entertainer","Player's Hand Book"],
        ["Folk Hero","Player's Hand Book"],
        ["Guild Artisan","Player's Hand Book"],
        ["Hermit","Player's Hand Book"],
        ["Noble","Player's Hand Book"],
        ["Outlander","Player's Hand Book"],
        ["Sage","Player's Hand Book"],
        ["Sailor","Player's Hand Book"],
        ["Soldier","Player's Hand Book"],
        ["Urchin","Player's Hand Book"]
      ];

      // [0-Region, 1-in or outside of the region, 2-name of district, 3-maxCR, 4-minCR]:
      Locations=[
        ["Kla'Bbbert","inside","Castle",20,19],
        ["Kla'Bbbert","inside","Cloud Church",19,18],
        ["Kla'Bbbert","inside","Six Fairs - District 1",18,17],
        ["Kla'Bbbert","inside","Six Fairs - District 2",17,16],
        ["Kla'Bbbert","inside","Six Fairs - District 3",16,15],
        ["Kla'Bbbert","inside","Fey Port",14,13],
        ["Kla'Bbbert","inside","Six Fairs - District 4",12,11],
        ["Kla'Bbbert","inside","Six Fairs - District 5",10,9],
        ["Kla'Bbbert","inside","Fish Port",8,7],
        ["Kla'Bbbert","inside","Six Fairs - District 6",6,5],
        ["Kla'Bbbert","inside","Smallgate",4,3],
        ["Kla'Bbbert","inside","Meat Bridge",2,0],
        ["Kla'Bbbert","outside","Darkhall",12,10],
        ["Kla'Bbbert","outside","The Ridge",9,7],
        ["Kla'Bbbert","outside","Ghost Crown",7,5],
        ["Kla'Bbbert","outside","Three Heaths",7,5]
      ];
    </script>
  </head>

  <body>
    <div class="container">
      <div class="row">
        <div class="col">
          <h1>Bounty Generator</h1>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <h2>Skip Table:</h2>

          <p id="Bounty">
            <!-- Action, Background, Class, Source of Bounty, Src location, Position-spin, Position-Distance -->
          </p>
          <!-- Input for CR Level -->
          <p>
            <label for="CR">CR Level:</label>
            <input type="number" id="BountyCRLevel" name="CR" min="0" max="20" value="0">
          </p>

          <!-- https://en.wikipedia.org/wiki/Skiptrace -->
          <table id="Skip" class="table table-hover">
            <thead>
              <tr>
                <th scope="col">Spike will do (Action)...</th>
                <th scope="col">Rac</th>
                <th scope="col">Class</th>
                <th scope="col">Background</th>
                <th scope="col">CR</th>
                <th scope="col">In/Out of Kla'Bbbert</th>
                <th scope="col">Location</th>
                <th scope="col">'Spot'</th>
                <th scope="col">Spin</th>
                <th scope="col">Distance</th>
                <th scope="col">Reward</th>
              </tr>
            </thead>
            <tbody id="SkipTable">
              <tr>           
              </tr>
            </tbody>
          </table>

          <p>
            <button type="button" class="btn btn-primary" onclick="randomBountyCreateSkip()">Generate</button>
          </p>

          <br>
          <hr>
          <br>
          
          <!-- Bondsman -- aka source -->
          <h2>Source Table:</h2>
          <table id="Bondsman" class="table table-hover">
            <thead>
              <tr>
                <th scope="col">"___" location as Posted Banner</th>
                <th scope="col">In/Out of Kla'Bbbert</th>
                <th scope="col">Location</th>
                <th scope="col">'Spot'</th>
                <th scope="col">Spin</th>
                <th scope="col">Distance</th>
                <th scope="col">Rac</th>
                <th scope="col">Class</th>
                <th scope="col">Age</th>
              </tr>
            </thead>
            <tbody id="BondsmanTable">
              <tr>
              </tr>
            </tbody>
          </table>

          <p>
            <button type="button" class="btn btn-primary" onclick="randomBountyCreateBondsman()">Generate Source/Bondsman</button>
          </p>
          <p id="bounty"></p>
        </div>
      </div>
    </div>

    <script>
      function randomBountyCreateSkip() {
        // load BountyCRLevel as int
        var BountyCRLevel = document.getElementById("BountyCRLevel").value;

        var NewBountyRowEntry = document.createElement("tr");

        // GENERATE Skip:
        //create random 7 digit string
        var bountyIDRoll = Math.floor(Math.random() * 10000000);
        var bountyIDStr = bountyIDRoll.toString();
        var bountyID = bountyIDStr.padStart(7, "0");        

        // Create random roll (pick 1 from 100) , append to td element:  "B_Action"
        var Roll_B_Action = Math.floor(Math.random() * 100);
        var ID_B_Action = "B_Action_" + bountyID;
        var Cell_B_Action = document.createElement("td");
        Cell_B_Action.setAttribute("id", ID_B_Action);
        Cell_B_Action.innerHTML = Roll_B_Action;
        NewBountyRowEntry.appendChild(Cell_B_Action);

        // Create random roll (pick 1 from Racs[]) , append to td element:  "B_Rac"
        var Roll_B_Rac = Math.floor(Math.random() * Racs.length);
        var ID_B_Rac = "B_Rac_" + bountyID;
        var Cell_B_Rac = document.createElement("td");
        Cell_B_Rac.setAttribute("id", ID_B_Rac);
        Cell_B_Rac.innerHTML = Racs[Roll_B_Rac][0];
        NewBountyRowEntry.appendChild(Cell_B_Rac);

        // Create random roll (pick 1 from Classes[]) , append to td element:  "B_Class"
        var Roll_B_Class = Math.floor(Math.random() * classes.length);
        var ID_B_Class = "B_Class_" + bountyID;
        var Cell_B_Class = document.createElement("td");
        Cell_B_Class.setAttribute("id", ID_B_Class);
        Cell_B_Class.innerHTML = classes[Roll_B_Class][0];
        NewBountyRowEntry.appendChild(Cell_B_Class);

        // Create random roll (pick 1 from backgrounds[]) , append to td element:  "B_Background"
        var Roll_B_Background = Math.floor(Math.random() * backgrounds.length);
        var ID_B_Background = "B_Background_" + bountyID;
        var Cell_B_Background = document.createElement("td");
        Cell_B_Background.setAttribute("id", ID_B_Background);
        Cell_B_Background.innerHTML = backgrounds[Roll_B_Background][0];
        NewBountyRowEntry.appendChild(Cell_B_Background);

        var BountyCRLevelMin = parseInt(BountyCRLevel) - 1;
        var BountyCRLevelMax = parseInt(BountyCRLevel) + 1;

        var validLocations = [];

        var testingPoints = [BountyCRLevelMin, BountyCRLevel, BountyCRLevelMax];
        for (var i = 0; i < testingPoints.length; i++) {

          var chosenCR = testingPoints[i];
          if (chosenCR >= 0 && chosenCR < 20) {

            // [0-Region, 1-in or outside of the region, 2-name of district, 3-maxCR, 4-minCR]:
            console.log("chosenCR: " + chosenCR);
            for (var j = 0; j < Locations.length; j++) {
              if (chosenCR >= Locations[j][4]  && chosenCR <= Locations[j][3]) {         // Locations[3: maxCR, 4: minCR]:

                // check all validLocations for duplicates
                var duplicate = false;
                for (var k = 0; k < validLocations.length; k++) {
                  if (validLocations[k] == Locations[j][2]) {
                    duplicate = true;
                    console.log("\tDuplicate found: " + validLocations[k]);
                  }
                }

                if (!duplicate) {
                  validLocations.push(Locations[j][2]);
                  console.log("\tValid (and/or NEW) locale!: "+ Locations[j][2]);
                }

              }
            }
            
          }
        }

        // console.log("Done with Loop: " + i+1);

        // debug print validLocations
        console.log("[DEBUG] Found a total of:" + validLocations.length + "; they are:" + validLocations);

        // Create random roll (pick 1 from 20; modulus with even) , append to td element:  "B_CR"
        var Roll_B_CR = Math.floor(Math.random() * 20);
        // 

        // Create random roll (pick 1 from 4) , append to td element:  "B_Location_InOut"

        // Create random roll (pick 1 from ) , append to td element:  "B_Location"

        // Create random roll (pick 1 from ) , append to td element:  "B_Spot"

        // Create random roll (pick 1 from ) , append to td element:  "B_Spin"

        // Create random roll (pick 1 from ) , append to td element:  "B_Reward"

        document.getElementById("SkipTable").appendChild(NewBountyRowEntry);

      }

      function randomBountyCreateBondsman() {
        var NewBondsmanRowEntry = document.createElement("tr");

        isBannerInTheSameDistrict = true;

        // GENERATE Bondsman:
        //create random 7 digit string
        var bondsIDRoll = Math.floor(Math.random() * 10000000);
        var bondsIDStr = bondsIDRoll.toString();
        var bondsID = bondsIDStr.padStart(7, "0");  

        // Create random roll (pick 1 from 20; if less taht 15 -- then the same as the board) , append to td element:  "S_BannerPostedFrom"
        var Roll_S_BannerPostedFrom = Math.floor(Math.random() * 20);
        var ID_S_BannerPostedFrom = "S_BannerPostedFrom_" + bondsID;
        var Cell_S_BannerPostedFrom = document.createElement("td");
        Cell_S_BannerPostedFrom.setAttribute("id", ID_S_BannerPostedFrom);
        if(Roll_S_BannerPostedFrom < 15) {
          Cell_S_BannerPostedFrom.innerHTML = "Same District";
        } else {
          isBannerInTheSameDistrict = false;
          Cell_S_BannerPostedFrom.innerHTML = "Different District";
        }
        NewBondsmanRowEntry.appendChild(Cell_S_BannerPostedFrom);

        // Create random roll (pick 1 from ) , append to td element:  "S_InOut"

        // Create random roll (pick 1 from ) , append to td element:  "S_Location"

        // Create random roll (pick 1 from ) , append to td element:  "S_Spot"

        // Create random roll (pick 1 from ) , append to td element:  "S_Spin"

        // Create random roll (pick 1 from ) , append to td element:  "S_Distance"

        // Create random roll (pick 1 from ) , append to td element:  "S_Rac"

        // Create random roll (pick 1 from ) , append to td element:  "S_Class"

        // Create random roll (pick 1 from ) , append to td element:  "S_Age"  

        document.getElementById("BondsmanTable").appendChild(NewBondsmanRowEntry);
      }

    </script>
  </body> 
</html>